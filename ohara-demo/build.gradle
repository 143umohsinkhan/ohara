apply from: "$rootDir/gradle/dependencies.gradle"
apply plugin: 'scala'
dependencies {
  compile project(':ohara-common')
  compile project(':ohara-configurator')
  compile project(':ohara-manager')
  compile project(':ohara-testing-util')
}

/**
 * run ohara
 */
task runOhara(type: JavaExec, dependsOn: 'classes') {
  doFirst {
    println 'specify the -Pttl to set the time of running ohara'
  }
  classpath = sourceSets.main.runtimeClasspath
  main = "com.island.ohara.runOhara"
  String ttl = 60 //seconds
  String hostname = "localhost"
  String port = 0

  if(project.hasProperty('ttl')) ttl = "${project.getProperty('ttl')}"
  if(project.hasProperty('hostname')) hostname = "${project.getProperty('hostname')}"
  if(project.hasProperty("port")) port = "${project.getProperty('port')}"

  args = Arrays.asList("--web", "$parent.projectDir/ohara-manager/src/web",
          "--ttl", ttl,
          "--hostname", hostname,
          "--port", port)
}